2025-07-16 04:06:38.026 | INFO     | uvicorn.server:_serve:84 - Started server process [135]
2025-07-16 04:06:38.026 | INFO     | uvicorn.lifespan.on:startup:48 - Waiting for application startup.
2025-07-16 04:06:38.041 | INFO     | uvicorn.lifespan.on:startup:62 - Application startup complete.
2025-07-16 04:06:38.042 | INFO     | uvicorn.server:_log_started_message:216 - Uvicorn running on http://0.0.0.0:12332 (Press CTRL+C to quit)
2025-07-16 04:06:38.082 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60468 - "GET / HTTP/1.1" 200
2025-07-16 04:06:38.092 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:38.099 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60474 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:38.100 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734319bc50d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734319bc4a10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a31b20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a3c810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a31b20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734319bc4a10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319c63810>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319c63810>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a8fba0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:39.116 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:39.129 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60476 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:39.131 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957240>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861e90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330861a50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330861a50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a684c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330862950>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330862950>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309571a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:41.146 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:41.159 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54448 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:41.160 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957740>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330888f50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330888550>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957a60>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957a60>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330888550>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330862310>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330862310>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a318a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:42.169 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54464 - "GET / HTTP/1.1" 200
2025-07-16 04:06:42.178 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:42.189 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54476 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:42.190 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343199bcf40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343199bcf40>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308fd250>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308fd2d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a31800>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fcdd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a31800>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308fd2d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a684c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308fc990>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308fc990>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957380>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:43.200 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:43.210 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54490 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:43.211 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309574c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309574c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330889e50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330888790>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343309577e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889850>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343309577e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330888790>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68640>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088a5d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088a5d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890180>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:45.231 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:45.242 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54496 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:45.243 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890400>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330898810>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330898790>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308905e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890720>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308905e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330898790>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a687c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330898f90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330898f90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890900>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:46.260 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54502 - "GET / HTTP/1.1" 200
2025-07-16 04:06:46.271 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:46.285 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54512 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:46.286 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308fda50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308fd750>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957600>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd910>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957600>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308fd750>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330940210>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330940210>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:47.297 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:47.309 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54520 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:47.310 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433088aad0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433088ab10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957740>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088acd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957740>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433088ab10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088a090>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088a090>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957b00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:49.323 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:49.337 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54522 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:49.338 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31a80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31a80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330862bd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863b50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a328e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31b20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a328e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863b50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863550>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863550>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890360>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:50.345 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54526 - "GET / HTTP/1.1" 200
2025-07-16 04:06:50.351 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:50.360 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:54536 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:50.361 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890ea0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0750>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890f40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890f40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890f40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890f40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890f40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a06d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890c20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890d60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890c20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a06d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68c40>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0f90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0f90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891260>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:51.369 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:51.379 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60440 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:51.381 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31800>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31800>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433089bd10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089ae10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a318a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a8fba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330899bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a318a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089ae10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433089b090>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433089b090>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a31a80>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:53.043 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:06:53.390 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:53.402 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60446 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:53.403 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309579c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309579c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330889c10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309576a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433088b8d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308885d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433088b8d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088b250>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088b250>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309571a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:54.419 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60458 - "GET / HTTP/1.1" 200
2025-07-16 04:06:54.425 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:54.434 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60466 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:54.435 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957f60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957f60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330863950>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308618d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957920>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957920>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308618d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863bd0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863bd0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891440>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:55.444 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:55.457 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60470 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:55.460 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308916c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308916c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3810>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891760>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891760>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891760>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a2e10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891800>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891800>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a2e10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68640>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3f50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3f50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891580>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:57.470 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:57.481 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60476 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:57.482 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31800>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31800>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308620d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31a80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31a80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31a80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31a80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31a80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863c50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a328e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957f60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c704d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a328e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863c50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863bd0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863bd0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a318a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:58.491 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60488 - "GET / HTTP/1.1" 200
2025-07-16 04:06:58.499 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:58.509 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60500 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:58.510 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309579c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309579c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734319a3c0d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734319a3c290>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734319a3c290>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088aa10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088aa10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957240>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:06:59.519 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:06:59.528 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60502 - "POST /verify HTTP/1.1" 500
2025-07-16 04:06:59.529 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309571a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309571a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433089a150>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089b210>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891bc0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891bc0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089b210>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088b110>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088b110>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891440>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:00.401 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:00.416 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45410 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:00.417 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308af1d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308ad710>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891ee0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892020>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af050>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891ee0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308ad710>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a684c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a87950>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a87950>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892200>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:01.425 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45418 - "GET / HTTP/1.1" 200
2025-07-16 04:07:01.433 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:01.446 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45422 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:01.447 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31b20>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433089a110>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a328e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a328e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a328e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a328e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a328e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089be90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad890>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089be90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a1c550>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a1c550>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957920>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:02.465 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:02.477 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45436 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:02.478 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ec0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ec0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433088a590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330889c10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ce0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957e20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a850>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ce0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330889c10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a37cd0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a37cd0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309574c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:04.507 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:04.518 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45440 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:04.519 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861890>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863b90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890040>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308615d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890040>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863b90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2750>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2750>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308900e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:05.535 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45444 - "GET / HTTP/1.1" 200
2025-07-16 04:07:05.548 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:05.560 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45446 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:05.561 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892480>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b7150>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b70d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892700>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b6e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b70d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73435f821310>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73435f821310>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892980>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:06.570 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:06.582 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45454 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:06.583 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308636d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330862e50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343309576a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343309576a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330862e50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73431b7f3850>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73431b7f3850>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957e20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:06.896 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:07:08.611 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:08.624 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:45462 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:08.625 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957b00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330889f10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330889050>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957740>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957420>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330889050>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330888f10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330888f10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309579c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:09.652 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58542 - "GET / HTTP/1.1" 200
2025-07-16 04:07:09.662 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:09.672 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58548 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:09.674 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891440>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b5010>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308928e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308928e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308928e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308928e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308928e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b5110>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b5150>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b5110>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319bc4c10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319bc4c10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308900e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:10.683 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:10.695 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58558 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:10.695 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892ca0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308c6010>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892d40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892d40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892d40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892d40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892d40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308c5f90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892de0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892f20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c5b10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892de0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308c5f90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68f40>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308c6850>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308c6850>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893100>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:12.702 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:12.708 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58574 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:12.709 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957b00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330888dd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309571a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433088ae10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343309579c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957f60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888f50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343309579c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433088ae10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088b250>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088b250>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957600>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:13.719 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58580 - "GET / HTTP/1.1" 200
2025-07-16 04:07:13.726 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:13.735 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58588 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:13.736 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330862dd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308623d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957a60>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862e50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957a60>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308623d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863e10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863e10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a31620>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:14.743 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:14.751 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58594 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:14.752 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891440>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891440>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3490>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b4d50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891bc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1b90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b4d50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3250>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3250>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891d00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:16.772 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:16.782 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58600 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:16.783 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891300>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308c6890>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308c4890>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892660>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7dd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308c4890>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308c5c50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308c5c50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892a20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:17.797 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58616 - "GET / HTTP/1.1" 200
2025-07-16 04:07:17.805 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:17.818 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58622 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:17.819 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957c40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957c40>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308c5590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308c4a90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c6810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308c4a90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308c49d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308c49d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:18.832 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:18.845 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:58638 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:18.846 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957420>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957420>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308fcb10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308fcb50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343309576a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957560>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308fd2d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343309576a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308fcb50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308fd850>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308fd850>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a31760>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:20.856 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:20.867 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51900 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:20.868 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31620>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31620>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0110>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a319e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a1d50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343607d1120>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a8f9c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0350>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343607d1120>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a1d50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0c10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0c10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343199bcf40>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:21.881 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51902 - "GET / HTTP/1.1" 200
2025-07-16 04:07:21.888 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:21.900 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51918 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:21.953 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891d00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891d00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330899e90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892840>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330898710>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892160>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089b590>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892ac0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330898710>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68f40>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330898c50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330898c50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892340>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:21.963 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:07:22.964 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:22.975 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51924 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:22.977 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fba0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734319a84c90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734319a84450>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a32980>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a32980>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734319a84450>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a04090>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a04090>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a31620>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:24.995 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:25.008 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51930 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:25.009 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a331a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a331a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308c6c90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31760>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308c5590>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a31b20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c63d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a31b20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308c5590>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68ac0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308c6d10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308c6d10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309576a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:26.025 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51938 - "GET / HTTP/1.1" 200
2025-07-16 04:07:26.036 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:26.048 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51944 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:26.049 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fba0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330899f90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a318a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a318a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a318a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a318a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089a8d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a32f20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089a510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a32f20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089a8d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319997d90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319997d90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a8fb00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:27.060 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:27.073 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51952 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:27.074 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31a80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31a80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0e10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a10d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a10d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0750>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0750>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:27.809 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:27.822 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:51966 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:27.824 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433088ba90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433088bdd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892480>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330888310>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892480>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433088bdd0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330898fd0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330898fd0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308927a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:28.836 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56412 - "GET / HTTP/1.1" 200
2025-07-16 04:07:28.845 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:28.858 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56422 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:28.859 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892700>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861e10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330861b50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893060>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860e10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893060>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330861b50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a684c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73431b7cd490>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73431b7cd490>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a8fce0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:29.867 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:29.878 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56438 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:29.879 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31620>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a31620>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3a50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32980>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32980>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32980>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32980>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32980>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a2690>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a320c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a325c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319c70450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a320c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a2690>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088bb90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088bb90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957c40>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:31.889 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:31.900 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56454 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:31.901 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ba0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734319a37790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309574c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734319a37e90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957f60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a11d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ec0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734319a37e90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a87290>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a87290>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309579c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:32.915 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56468 - "GET / HTTP/1.1" 200
2025-07-16 04:07:32.922 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:32.941 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56476 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:32.943 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308925c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308925c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308634d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308632d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892ca0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892ca0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308632d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308621d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308621d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892660>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:33.958 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:33.972 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56478 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:33.973 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308aecd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891da0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308aea10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891e40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ace90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891e40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308aea10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68640>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308af1d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308af1d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a31a80>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:35.687 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:07:35.987 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:35.998 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56486 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:35.999 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a32980>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a32980>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0610>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a3f90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a1a50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a3f90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2510>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2510>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957b00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:37.014 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56492 - "GET / HTTP/1.1" 200
2025-07-16 04:07:37.024 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:37.036 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56500 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:37.037 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ce0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ce0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330898fd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957c40>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089a790>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957e20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433089bd90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957e20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089a790>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308612d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308612d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a8fce0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:38.045 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:38.055 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:56510 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:38.056 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861350>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863b90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892fc0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330861710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892fc0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863b90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330888a50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330888a50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892660>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:40.064 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:40.076 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35246 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:40.076 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892700>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308ad090>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308ad490>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308900e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893060>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ac650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308900e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308ad490>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a684c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a87a10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a87a10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891620>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:41.086 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35252 - "GET / HTTP/1.1" 200
2025-07-16 04:07:41.093 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:41.102 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35256 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:41.103 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957600>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0b50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309572e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309572e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309572e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309572e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a0cd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957e20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a3710>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a0cd0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73431a0082d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73431a0082d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957ba0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:42.109 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:42.121 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35264 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:42.122 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957380>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957380>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308c43d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308c7b10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a323e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a32f20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308c7d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a323e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308c7b10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343199c7b50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343199c7b50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957ec0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:44.132 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:44.145 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35270 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:44.146 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330888190>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308914e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308914e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308914e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308914e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308914e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433088bd50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892520>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a7d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892520>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433088bd50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088a310>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088a310>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892480>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:45.163 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35274 - "GET / HTTP/1.1" 200
2025-07-16 04:07:45.171 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:45.185 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35280 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:45.187 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891e40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891e40>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308af790>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892c00>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892c00>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892c00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892c00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892c00>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308aee10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308927a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad110>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308927a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308aee10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68640>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308ad210>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308ad210>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308931a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:46.195 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:46.205 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:35282 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:46.206 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433088b610>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a320c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a320c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a320c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a320c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a320c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330889250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a31a80>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a8f9c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308890d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a31a80>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330889250>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319bc4c10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319bc4c10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957a60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:48.217 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:48.228 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60562 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:48.229 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3110>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a2910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957f60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a0e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a2910>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a1a90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a1a90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957d80>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:49.242 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60568 - "GET / HTTP/1.1" 200
2025-07-16 04:07:49.250 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:49.263 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60578 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:49.265 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892660>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892660>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861e50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863590>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891f80>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad050>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891f80>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863590>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330861750>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330861750>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892e80>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:50.275 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:50.290 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60594 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:50.291 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891760>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b5510>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308913a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308913a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308913a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308913a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308913a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b4ad0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308919e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308919e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b4ad0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68c40>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308b4e50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308b4e50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890a40>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:50.692 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:07:52.304 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:52.314 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60604 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:52.315 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a319e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a319e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330863590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a323e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330861710>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957b00>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ce0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862610>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957b00>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330861710>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863e10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863e10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:53.326 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60610 - "GET / HTTP/1.1" 200
2025-07-16 04:07:53.334 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:53.346 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60612 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:53.346 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957d80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0b50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a3b10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ba0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a3b10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308fdc90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308fdc90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891b20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:54.356 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:54.366 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60614 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:54.367 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891f80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433088bd50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330889b10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891080>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330889090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330889b10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308c43d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308c43d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891ee0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:56.377 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:56.390 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60628 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:56.391 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308902c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308902c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308ccc50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890e00>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890e00>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890e00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890e00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890e00>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308ccc90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890220>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890c20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ccb90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890220>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308ccc90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a687c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308cd510>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308cd510>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890ae0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:57.284 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60636 - "GET / HTTP/1.1" 200
2025-07-16 04:07:57.293 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:57.305 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:60652 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:57.306 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b5850>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957380>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73431b7a1e10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957920>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7a50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957920>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73431b7a1e10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308b7790>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308b7790>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309574c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:57.311 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:57.325 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38002 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:57.326 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330863f90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863b50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957f60>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957240>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330863890>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957f60>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863b50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863990>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863990>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957b00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:07:59.344 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:07:59.356 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38018 - "POST /verify HTTP/1.1" 500
2025-07-16 04:07:59.357 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891f80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734326113010>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a2250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891ee0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891c60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891ee0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a2250>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330889990>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330889990>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308923e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:00.367 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38034 - "GET / HTTP/1.1" 200
2025-07-16 04:08:00.375 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:00.390 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38050 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:00.390 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308904a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308904a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d0490>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d0310>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890400>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892660>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d0250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890400>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d0310>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a690c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d0d10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d0d10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890720>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:01.401 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:01.413 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38064 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:01.414 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309572e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73431b7a1e10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089abd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957f60>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957e20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a3d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957f60>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089abd0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433088b090>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433088b090>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957380>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:03.429 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:03.440 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38078 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:03.441 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309574c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309574c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734319a84c90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734319a87690>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343309577e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890b80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a87650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343309577e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734319a87690>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73433089b610>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73433089b610>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308914e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:04.452 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38082 - "GET / HTTP/1.1" 200
2025-07-16 04:08:04.461 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:04.470 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38094 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:04.471 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890fe0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890fe0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861e90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308923e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863d50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890cc0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890cc0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863d50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330863990>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330863990>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892fc0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:04.568 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:08:05.482 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:05.496 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:38096 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:05.497 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890f40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890f40>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d3050>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d2950>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893380>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2f50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893380>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d2950>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a69240>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d3890>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d3890>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308936a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:07.515 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:07.526 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46874 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:07.527 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ec0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957ec0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73431ae027d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309577e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308fdc90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862bd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308fdc90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d1850>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d1850>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330957e20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:08.548 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46880 - "GET / HTTP/1.1" 200
2025-07-16 04:08:08.557 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:08.569 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46886 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:08.570 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957920>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b5450>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957d80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b70d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890cc0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b68d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890cc0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b70d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319bc5d10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319bc5d10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890180>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:09.581 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:09.591 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46902 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:09.592 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892520>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73433089b6d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890900>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890900>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890900>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890900>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73433089a3d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890b80>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330898750>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890b80>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73433089a3d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319a85b90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319a85b90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891c60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:11.602 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:11.615 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46906 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:11.616 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308939c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308939c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308da2d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893a60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893a60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308da250>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893b00>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893c40>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9150>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893b00>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308da250>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a693c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308dab50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308dab50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893920>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:12.623 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46912 - "GET / HTTP/1.1" 200
2025-07-16 04:08:12.627 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:12.634 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46916 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:12.634 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957920>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308ce690>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957ec0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308cf690>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957ce0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088b250>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957ce0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308cf690>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73432132fc50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73432132fc50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309579c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:13.644 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:13.657 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46918 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:13.658 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330957e20>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a0b50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a0990>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890900>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890b80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890900>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a0990>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3250>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a3250>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308914e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:15.669 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:15.679 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46920 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:15.680 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890cc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890cc0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330861e10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308616d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893600>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330860dd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893600>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308616d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d8a50>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d8a50>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891b20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:16.689 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46924 - "GET / HTTP/1.1" 200
2025-07-16 04:08:16.697 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:16.706 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:46928 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:16.707 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308e8540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308e8540>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e5950>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8040>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8040>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8040>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e5990>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308e8180>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e82c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5910>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308e8180>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e5990>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a69540>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e6210>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e6210>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308e85e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:17.717 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:17.728 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53904 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:17.729 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308937e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308937e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d1a90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d1d50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d2e90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d1d50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2450>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2450>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:19.571 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:08:19.739 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:19.748 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53914 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:19.749 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308db9d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891f80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308dba10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308914e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892b60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dbe50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308914e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308dba10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d9c90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d9c90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343309572e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:20.759 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53928 - "GET / HTTP/1.1" 200
2025-07-16 04:08:20.768 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:20.779 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53944 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:20.780 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309577e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343309577e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308aefd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330957a60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308afe50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343309579c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x73433088a590>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330957c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308afe50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330898450>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330898450>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308e8400>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:21.802 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:21.821 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53952 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:21.822 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308e8860>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308e8860>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308f8450>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e89a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e89a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e89a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e89a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e89a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308f84d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308e8a40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308e8b80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e77d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308e8a40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308f84d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a696c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308f8d90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308f8d90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308e8d60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:23.832 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:23.844 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53964 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:23.846 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330891080>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e50d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893600>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893600>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893600>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893600>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e4590>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308937e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e6c90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308937e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e4590>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e58d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e58d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891b20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:24.862 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53976 - "GET / HTTP/1.1" 200
2025-07-16 04:08:24.872 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:24.886 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53980 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:24.887 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892b60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892b60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d86d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893d80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d8910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892fc0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893e20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8b10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892fc0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d8910>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308da110>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308da110>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891ee0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:25.912 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:25.923 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:53996 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:25.924 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892520>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d84d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d8f50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893ec0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308932e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d9010>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893ec0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d8f50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x73431b866450>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x73431b866450>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308934c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:26.448 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:26.466 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55534 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:26.467 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893a60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893a60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d2bd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892e80>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d2150>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308911c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890400>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3190>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308911c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d2150>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a69540>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d0690>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d0690>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308936a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:27.482 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55538 - "GET / HTTP/1.1" 200
2025-07-16 04:08:27.490 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:27.504 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55542 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:27.505 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893920>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d9f90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892520>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d8b50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891a80>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893420>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dab50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891a80>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d8b50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734319c70410>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734319c70410>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308904a0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:28.512 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:28.523 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55552 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:28.524 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308905e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308905e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e6510>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890180>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e6910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308923e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ce0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5650>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308923e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e6910>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4b10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4b10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893b00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:30.539 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:30.554 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55564 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:30.557 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892980>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892980>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d3bd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890fe0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d1a50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308907c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d1ad0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d1a50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734325f40190>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734325f40190>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893f60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:31.571 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55572 - "GET / HTTP/1.1" 200
2025-07-16 04:08:31.579 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:31.592 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55582 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:31.595 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890ea0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890ea0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308cde50>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892fc0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308cccd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890c20>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891300>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cde90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890c20>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308cccd0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a693c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308cd850>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308cd850>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891760>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:32.605 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:32.618 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55586 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:32.619 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308922a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308922a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308ce210>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308cc650>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308914e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308cfa90>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308914e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308cc650>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d3750>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d3750>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893740>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:33.075 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:08:34.634 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:34.650 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55602 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:34.651 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890720>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e7fd0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891ee0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e5050>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308909a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891080>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5450>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308909a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e5050>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4190>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4190>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893600>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:35.669 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57530 - "GET / HTTP/1.1" 200
2025-07-16 04:08:35.680 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:35.693 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57536 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:35.694 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308925c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308925c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d8650>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890cc0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d9c50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308939c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891a80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8f10>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308939c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d9c50>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d8310>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d8310>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893d80>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:36.702 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:36.712 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57550 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:36.713 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890f40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890f40>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b7350>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891800>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891800>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891800>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891800>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891800>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b4c90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308916c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891580>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b7810>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308916c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b4c90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a69240>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308b6650>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308b6650>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330891da0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:38.733 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:38.750 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57558 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:38.752 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890cc0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890cc0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308b71d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308b4a90>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893ba0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308b4d50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893ba0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308b4a90>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308dbc90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308dbc90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892480>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:39.774 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57572 - "GET / HTTP/1.1" 200
2025-07-16 04:08:39.788 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:39.803 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57576 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:39.805 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308919e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308919e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e63d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891940>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e6910>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893880>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308909a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e67d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893880>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e6910>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e5d90>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e5d90>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892520>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:40.826 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:40.840 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57584 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:40.841 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890d60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890d60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d39d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893f60>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893f60>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893f60>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893f60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893f60>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d1f10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893c40>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308905e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d3090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893c40>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d1f10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308ce790>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308ce790>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890180>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:42.850 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:42.863 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57586 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:42.864 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892b60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892b60>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3710>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308931a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308931a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308931a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308931a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308931a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a37d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330893240>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892a20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a2410>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330893240>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a37d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a690c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2090>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a2090>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892020>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:43.873 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57588 - "GET / HTTP/1.1" 200
2025-07-16 04:08:43.882 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:43.892 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57592 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:43.892 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892ca0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330892ca0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a2250>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890360>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a3210>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308905e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890ae0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308a07d0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308905e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a3210>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0610>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308a0610>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330892c00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:44.904 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:44.914 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:57604 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:44.915 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e7990>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893880>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893880>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893880>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e6750>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308909a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308939c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4090>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308909a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e6750>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4650>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4650>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893920>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:46.927 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:46.943 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34810 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:46.944 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308922a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308922a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308da8d0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ba0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ba0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ba0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893ba0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308dba10>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308937e0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890b80>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308d8210>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308937e0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308dba10>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308fc250>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308fc250>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x7343308934c0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:47.953 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34820 - "GET / HTTP/1.1" 200
2025-07-16 04:08:47.962 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:47.974 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34834 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:47.978 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fce0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a8fce0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308af690>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308904a0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308af0d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891940>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892f20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308af390>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891940>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308af0d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a687c0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308af3d0>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308af3d0>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a323e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:48.077 | INFO     | utils.repl_cache:print_status:179 - 

=================================================================
Idx   | Header                                        | Pool Size 
-----------------------------------------------------------------
-----------------------------------------------------------------
Top 10 global LRU repl:
-----------------------------------------------------------------
Idx   | Header                                        | ID        
-----------------------------------------------------------------
-----------------------------------------------------------------
      | Total                                         | 0         
      | Idle                                          | 0         
      | Create Queue                                  | 0         
      | Close Queue                                   | 0         
      | Cache Hits                                    | 0         
      | Cache Misses                                  | 0         
      | Cache ratio                                   | 0.00      
      | its                                           | 0.0       
=================================================================
2025-07-16 04:08:48.990 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:49.002 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34844 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:49.003 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890b80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330890b80>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308adc10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308934c0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308ad8d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330891080>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892200>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308ad990>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330891080>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308ad8d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308ad650>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308ad650>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893880>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:51.018 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:51.029 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34856 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:51.030 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7343308914e0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734326111c90>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330893920>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734326113010>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330890540>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308925c0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308dabd0>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330890540>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734326113010>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68940>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e7990>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e7990>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890360>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:52.046 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34860 - "GET / HTTP/1.1" 200
2025-07-16 04:08:52.055 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:52.066 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34864 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:52.067 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893b00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893b00>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308a3250>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308a29d0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308920c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e5510>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308920c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308a29d0>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e5f10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e5f10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a8fb00>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:53.075 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:53.088 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34880 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:53.089 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a320c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a320c0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x734330863590>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31620>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x734330863890>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734319a331a0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734319a31bc0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734330862690>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734319a331a0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x734330863890>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68c40>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x734330861490>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x734330861490>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734319a328e0>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:53.572 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:53.583 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:34892 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:53.584 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734319a318a0>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308d3a10>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7343308937e0>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308d0510>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x734330892c00>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330892ca0>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x734319a5b550>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x734330892c00>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308d0510>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319c87dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308d1f10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308d1f10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330893e20>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:54.598 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55136 - "GET / HTTP/1.1" 200
2025-07-16 04:08:54.607 | DEBUG    | server.server:process_one_code_with_repl_fast:213 - [1234] Processing code: {"custom_id": "1234", "proof_header": "", "proof_body": "#check Nat", "timeout": 30}
2025-07-16 04:08:54.617 | INFO     | uvicorn.protocols.http.h11_impl:send:473 - 127.0.0.1:55138 - "POST /verify HTTP/1.1" 500
2025-07-16 04:08:54.617 | ERROR    | uvicorn.protocols.http.h11_impl:run_asgi:408 - Exception in ASGI application

Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/__main__.py", line 49, in <module>
    uvicorn.run(
    │       └ <function run at 0x734319b5bd80>
    └ <module 'uvicorn' from '/usr/local/lib/python3.11/site-packages/uvicorn/__init__.py'>

  File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0x734319b5bf60>
    └ <uvicorn.server.Server object at 0x734319c7a610>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x734319990040>
           │       │   └ <uvicorn.server.Server object at 0x734319c7a610>
           │       └ <function run at 0x734360991120>
           └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x734319c02200>
           │      └ <function Runner.run at 0x7343607d4cc0>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /usr/local/lib/python3.11/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x7343607d28e0>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x734326133650>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 641, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x7343607d2840>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 608, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x7343607d4680>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/local/lib/python3.11/asyncio/base_events.py", line 1936, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x73436093a8e0>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
  File "/usr/local/lib/python3.11/asyncio/events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu...r directory')>)>
> File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7343199cd990>
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
          └ <fastapi.applications.FastAPI object at 0x734319c4ecd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x734319c63cd0>
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x734330893920>
          │                            │    │    │     │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7343308e4650>
          │                            │    └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x734319bc3dd0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x734319c4ef90>>
          └ <fastapi.routing.APIRouter object at 0x734319c4ef90>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │     └ <function Route.handle at 0x73435f8b2f20>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │    └ <function request_response.<locals>.app at 0x734319c5a700>
          └ APIRoute(path='/verify', name='verify', methods=['POST'])
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330890540>
          │                            │    │        │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7343308e5410>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
          └ <function wrap_app_handling_exceptions at 0x73435f8b1940>
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x734330891b20>
          │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x7343308e4b50>>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 12332), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7343308925c0>
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7343308e5410>
                     └ <function get_request_handler.<locals>.app at 0x734319c5a5c0>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73436128ab60>
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'access': None, 'body': VerifyRequestBody(codes=[Code(custom_id='1234', proof='#check Nat', code=None)], timeout=30, infotre...
                 │         └ <function verify at 0x734319c5a480>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 171, in verify
    results_data = await asyncio.gather(*tasks)
                         │       │       └ [<coroutine object process_one_code_with_repl_fast at 0x734319a68dc0>]
                         │       └ <function gather at 0x7343607c1bc0>
                         └ <module 'asyncio' from '/usr/local/lib/python3.11/asyncio/__init__.py'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 219, in process_one_code_with_repl_fast
    lean_repl = LeanREPL()
                └ <class 'server.leanrepl.LeanREPL'>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
    │    └ <function LeanREPL.start_process at 0x734319c596c0>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4c10>

  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
    │              │          └ <class 'subprocess.Popen'>
    │              └ <module 'subprocess' from '/usr/local/lib/python3.11/subprocess.py'>
    └ <server.leanrepl.LeanREPL object at 0x7343308e4c10>

  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
    │    │              │     │           │           └ True
    │    │              │     │           └ <function LeanREPL.start_process.<locals>.preexec_fn at 0x734330890d60>
    │    │              │     └ None
    │    │              └ ['lake', 'env', '/app/lean-server/LeanDockerWrapper/kimina-lean-server/repl/.lake/build/bin/repl']
    │    └ <function Popen._execute_child at 0x734360fa63e0>
    └ <Popen: returncode: 255 args: ['lake', 'env', '/app/lean-server/LeanDockerWr...>
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
          │                    │          │        └ 'lake'
          │                    │          └ 'No such file or directory'
          │                    └ 2
          └ <class 'OSError'>

FileNotFoundError: [Errno 2] No such file or directory: 'lake'
2025-07-16 04:08:54.948 | INFO     | uvicorn.server:shutdown:264 - Shutting down
2025-07-16 04:08:55.051 | INFO     | uvicorn.lifespan.on:shutdown:67 - Waiting for application shutdown.
2025-07-16 04:08:55.054 | ERROR    | uvicorn.lifespan.on:send:134 - Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 99, in lifespan
    await task
  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/server.py", line 36, in _repl_creater
    repl = LeanREPL()
           ^^^^^^^^^^
  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 35, in __init__
    self.start_process()
  File "/app/lean-server/LeanDockerWrapper/kimina-lean-server/server/leanrepl.py", line 150, in start_process
    self.process = subprocess.Popen(
                   ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: 'lake'

2025-07-16 04:08:55.055 | ERROR    | uvicorn.lifespan.on:shutdown:73 - Application shutdown failed. Exiting.
2025-07-16 04:08:55.055 | INFO     | uvicorn.server:_serve:94 - Finished server process [135]
